(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,s){this.model=e,this.view=t,this.emitter=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.container=e,this.emitter=t}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(3),o=s(4),l=s(6);s(20);const a=new i;new l.default(new o.default(a),null,a)},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(5);class o extends i.default{constructor(e){super(e),this.scenarios=new Map([["2065BAP",!0],["2065CityII",!1]]),this.scenariosCollapsed=!1,this.purposes=new Map([["all",!0],["O",!1],["W",!1],["S",!1],["P",!1],["H",!1],["Other",!1]]),this.purposeColours=new Map([["all","#FFFFFF"],["O","#FF0000"],["W","#FFA500"],["S","#FFFF00"],["P","#ADFF2F"],["H","#00EEEE"],["Other","#9932CC"]]),this.purposesCollapsed=!1,this.overlays=new Map([["cma",!0],["city",!0],["nc",!1],["lrt",!0]]),this.overlayColours=new Map([["cma","#9932CC"],["city","#0000FF"],["nc","#FFFF00"],["lrt","#FF1493"]]),this.overlaysCollapsed=!1,this.times=new Map([["all",!0],["1",!1],["2",!1],["3",!1],["4",!1],["5",!1],["6",!1]]),this.timesCollapsed=!1,this.helpOpen=!1}initialDraw(){this.dispatchMapUpdated(),this.dispatchScenarioUpdated(),this.dispatchPurposeUpdated(),this.dispatchOverlayUpdated(),this.dispatchTimeUpdated(),this.emitter.emit("help-updated",this.helpOpen)}updateScenario(e){this.scenarios.forEach((e,t)=>{this.scenarios.set(t,!1)}),this.scenarios.set(e,!0),this.dispatchMapUpdated(),this.dispatchScenarioUpdated()}updatePurpose(e){this.updateControlMap(this.purposes,e),this.dispatchMapUpdated(),this.dispatchPurposeUpdated()}updateOverlay(e){this.updateControlMap(this.overlays,e),this.dispatchMapUpdated(),this.dispatchOverlayUpdated()}updateTime(e){this.updateControlMap(this.times,e),this.dispatchMapUpdated(),this.dispatchTimeUpdated()}updateControlMap(e,t){"all"===t?e.get("all")?e.set("all",!1):(e.forEach((t,s)=>{e.set(s,!1)}),e.set("all",!0)):(e.get("all")&&e.set("all",!1),e.set(t,!e.get(t)))}updatePurposeColours(e,t){this.purposeColours.set(e,t),this.dispatchMapUpdated(),this.dispatchPurposeUpdated()}updateOverlayColours(e,t){this.overlayColours.set(e,t),this.dispatchMapUpdated(),this.dispatchOverlayUpdated()}toggleHelp(){this.helpOpen=!this.helpOpen,this.emitter.emit("helpUpdated",this.helpOpen)}toggleCollapse(e){"scenario"===e?(this.scenariosCollapsed=!this.scenariosCollapsed,this.dispatchScenarioUpdated()):"purpose"===e?(this.purposesCollapsed=!this.purposesCollapsed,this.dispatchPurposeUpdated()):"overlay"===e?(this.overlaysCollapsed=!this.overlaysCollapsed,this.dispatchOverlayUpdated()):"time"===e&&(this.timesCollapsed=!this.timesCollapsed,this.dispatchTimeUpdated())}dispatchMapUpdated(){this.emitter.emit("map-updated",this.scenarios,this.purposes,this.overlays,this.times,this.purposeColours,this.overlayColours)}dispatchScenarioUpdated(){this.emitter.emit("scenario-updated",this.scenarios,this.scenariosCollapsed)}dispatchPurposeUpdated(){this.emitter.emit("purpose-updated",this.purposes,this.purposeColours,this.purposesCollapsed)}dispatchOverlayUpdated(){this.emitter.emit("overlay-updated",this.overlays,this.overlayColours,this.overlaysCollapsed)}dispatchTimeUpdated(){this.emitter.emit("time-updated",this.times,this.timesCollapsed)}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.emitter=e}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0),o=s(7),l=s(9),a=s(10),r=s(11),c=s(12),n=s(13),d=s(14),p=s(15),u=s(16),h=s(17),m=s(18),y=s(19);class f extends i.default{constructor(e,t,s){super(e,t,s),this.colourEditorView=new m.default(document.getElementById("colour-choices"),this.emitter),new y.default(this.model,this.colourEditorView,this.emitter),this.mapView=new o.default(document.getElementById("map"),this.emitter),new l.default(this.model,this.mapView,this.emitter),this.overlayView=new a.default(document.getElementById("overlay-control"),this.emitter),new r.default(this.model,this.overlayView,this.emitter),this.purposeView=new c.default(document.getElementById("purpose-control"),this.emitter),new n.default(this.model,this.purposeView,this.emitter),this.scenarioView=new d.default(document.getElementById("scenario-control"),this.emitter),new p.default(this.model,this.scenarioView,this.emitter),this.timeView=new u.default(document.getElementById("time-control"),this.emitter),new h.default(this.model,this.timeView,this.emitter),this.emitter.on("map-updated",(e,t,s,i,o,l)=>{this.mapView.draw(e,t,s,i,o,l)}),this.emitter.on("scenario-updated",(e,t)=>{this.scenarioView.draw(e,t)}),this.emitter.on("purpose-updated",(e,t,s)=>{this.purposeView.draw(e,t,s)}),this.emitter.on("overlay-updated",(e,t,s)=>{this.overlayView.draw(e,t,s)}),this.emitter.on("time-updated",(e,t)=>{this.timeView.draw(e,t)}),this.emitter.on("help-updated",e=>{o.default.drawHelp(e)})}}t.default=f},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(8),o=s(1);class l extends o.default{constructor(e,t){super(e,t),this.helpIcon=document.getElementById("help-icon"),this.help=document.getElementById("help"),this.closeHelp=document.getElementById("close-help"),this.initializeHelp(),i.accessToken="pk.eyJ1IjoidGhvbWFzbG9yaW5jeiIsImEiOiJjamx5aXVwaHAxamZzM3dsaWdkZ3Q2eGJyIn0.mXjlp9c3l2-NBoS1uaEUdw";this.map=new i.Map({container:"map",style:"mapbox://styles/thomaslorincz/cjx0png073khh1cpap7m6449e",bounds:[[-115.11466,53.04465],[-112.16116,54.06214]],attributionControl:!1,dragRotate:!1,pitchWithRotate:!1}).addControl(new i.AttributionControl({customAttribution:'<a href="https://github.com/thomaslorincz" rel="noopener" target="_blank">Developed by Thomas Lorincz<a/>'})),this.map.on("load",()=>{const e=[["2065BAP","thomaslorincz.1046c6an","output_2065BAP_focused-28fctt"],["2065CityII","thomaslorincz.3wttrtss","output_2065CityII_focused-757xdf"]];for(let t=0;t<e.length;t++){const s=e[t];this.map.addLayer({id:s[0],source:{type:"vector",url:"mapbox://"+s[1]},"source-layer":s[2],type:"circle",paint:{"circle-radius":["/",["to-number",["get","count"]],300],"circle-opacity-transition":{duration:1e3,delay:0}}})}const t=[["cma","thomaslorincz.1kz18y39","cma_boundary-5vtklc"],["city","thomaslorincz.48okpw5t","city_boundary-d6ewoz"],["nc","thomaslorincz.d571qaco","nc_CityII-axaip8"],["lrt","thomaslorincz.75obfmea","lrt_2065-0kp6p1"]];for(let e=0;e<t.length;e++){const s=t[e];this.map.addLayer({id:s[0],source:{type:"vector",url:"mapbox://"+t[1]},"source-layer":s[2],type:"line",paint:{"line-width":2},"line-opacity-transition":{duration:500,delay:0}})}this.emitter.emit("loaded")})}initializeHelp(){this.helpIcon.addEventListener("click",()=>{this.emitter.emit("help-clicked")}),this.help.addEventListener("click",e=>{e.target===document.getElementById("help")&&this.emitter.emit("help-clicked")}),this.closeHelp.addEventListener("click",()=>{this.emitter.emit("help-clicked")})}draw(e,t,s,i,o,l){e.forEach((e,s)=>{t.get("all")?this.map.setPaintProperty(s,"circle-color",o.get("all")):this.map.setPaintProperty(s,"circle-color",["match",["get","purp"],"O",o.get("O"),"W",o.get("W"),"S",o.get("S"),"P",o.get("P"),"H",o.get("H"),"Other",o.get("Other"),"#000000"]),this.map.setPaintProperty(s,"circle-opacity",e?1:0)}),s.forEach((e,t)=>{this.map.setPaintProperty(t,"line-color",l.get(t)),this.map.setPaintProperty(t,"line-opacity",e?1:0)}),e.forEach((e,s)=>{const o=[];t.forEach((e,t)=>{e&&o.push(t)});const l=[];i.forEach((e,t)=>{e&&l.push(parseInt(t))}),i.get("all")&&t.get("all")?this.map.setFilter(s,null):i.get("all")?this.map.setFilter(s,["in","purp",...o]):t.get("all")?this.map.setFilter(s,["in","time",...l]):this.map.setFilter(s,["all",["in","time",...l],["in","purp",...o]])})}static drawHelp(e){document.getElementById("help").style.display=e?"flex":"none"}}t.default=l},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);class o extends i.default{constructor(e,t,s){super(e,t,s),this.emitter.on("loaded",()=>{this.model.initialDraw()}),this.emitter.on("help-clicked",()=>{this.model.toggleHelp()})}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(1);class o extends i.default{constructor(e,t){super(e,t),this.overlayEntries=document.querySelectorAll(".overlay-entry"),this.overlayCollapse=document.getElementById("overlay-collapse"),this.overlayEntries.forEach(e=>{e.addEventListener("click",e=>{e.target instanceof HTMLElement&&this.emitter.emit("overlay-clicked",e.target.dataset.value)})}),this.overlayCollapse.addEventListener("click",()=>{this.emitter.emit("toggle-overlay-collapse")})}draw(e,t,s){e.forEach((e,s)=>{const i=document.getElementById(`overlay-${s}`),o=i.querySelector(".control-entry-icon"),l=i.querySelector(".control-entry-checkbox");o instanceof HTMLElement&&(o.style.backgroundColor=t.get(s),e?(i.classList.add("active"),l.textContent="check_box"):(i.classList.remove("active"),l.textContent="check_box_outline_blank"))});const i=document.getElementById("overlay-content");s?(i.classList.add("collapsed"),this.overlayCollapse.textContent="expand_more"):(i.classList.remove("collapsed"),this.overlayCollapse.textContent="expand_less")}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);class o extends i.default{constructor(e,t,s){super(e,t,s),this.emitter.on("overlay-clicked",e=>{this.model.updateOverlay(e)}),this.emitter.on("toggle-overlay-collapse",()=>{this.model.toggleCollapse("overlay")})}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(1);class o extends i.default{constructor(e,t){super(e,t),this.purposeEntries=document.querySelectorAll(".purpose-entry"),this.purposeCollapse=document.getElementById("purpose-collapse"),this.purposeEntries.forEach(e=>{e.addEventListener("click",e=>{e.target instanceof HTMLElement&&this.emitter.emit("purpose-clicked",e.target.dataset.value)})}),this.purposeCollapse.addEventListener("click",()=>{this.emitter.emit("toggle-purpose-collapse")})}draw(e,t,s){e.forEach((e,s)=>{const i=document.getElementById(`purpose-${s}`),o=i.querySelector(".control-entry-checkbox"),l=i.querySelector(".control-entry-icon");l instanceof HTMLElement&&(l.style.backgroundColor=t.get(s),e?(i.classList.add("active"),o.textContent="check_box"):(i.classList.remove("active"),o.textContent="check_box_outline_blank"))});const i=document.getElementById("purpose-content");s?(i.classList.add("collapsed"),this.purposeCollapse.textContent="expand_more"):(i.classList.remove("collapsed"),this.purposeCollapse.textContent="expand_less")}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);class o extends i.default{constructor(e,t,s){super(e,t,s),this.emitter.on("purpose-clicked",e=>{this.model.updatePurpose(e)}),this.emitter.on("toggle-purpose-collapse",()=>{this.model.toggleCollapse("purpose")})}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(1);class o extends i.default{constructor(e,t){super(e,t),this.scenarioEntries=document.querySelectorAll(".scenario-entry"),this.scenarioCollapse=document.getElementById("scenario-collapse"),this.scenarioEntries.forEach(e=>{e.addEventListener("click",e=>{e.target instanceof HTMLElement&&this.emitter.emit("scenario-clicked",e.target.dataset.value)})}),this.scenarioCollapse.addEventListener("click",()=>{this.emitter.emit("toggle-scenario-collapse")})}draw(e,t){e.forEach((e,t)=>{const s=document.getElementById(`scenario-${t}`),i=s.querySelector(".control-entry-icon");e?(s.classList.add("active"),i.textContent="radio_button_checked"):(s.classList.remove("active"),i.textContent="radio_button_unchecked")});const s=document.getElementById("scenario-content");t?(s.classList.add("collapsed"),this.scenarioCollapse.textContent="expand_more"):(s.classList.remove("collapsed"),this.scenarioCollapse.textContent="expand_less")}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);class o extends i.default{constructor(e,t,s){super(e,t,s),this.emitter.on("scenario-clicked",e=>{this.model.updateScenario(e)}),this.emitter.on("toggle-scenario-collapse",()=>{this.model.toggleCollapse("scenario")})}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(1);class o extends i.default{constructor(e,t){super(e,t),this.timeEntries=document.querySelectorAll(".time-entry"),this.timeCollapse=document.getElementById("time-collapse"),this.timeEntries.forEach(e=>{e.addEventListener("click",e=>{e.target instanceof HTMLElement&&this.emitter.emit("time-clicked",e.target.dataset.value)})}),this.timeCollapse.addEventListener("click",()=>{this.emitter.emit("toggle-time-collapse")})}draw(e,t){e.forEach((e,t)=>{const s=document.getElementById(`time-${t}`),i=s.querySelector(".control-entry-checkbox");e?(s.classList.add("active"),i.textContent="check_box"):(s.classList.remove("active"),i.textContent="check_box_outline_blank")});const s=document.getElementById("time-content");t?(s.classList.add("collapsed"),this.timeCollapse.textContent="expand_more"):(s.classList.remove("collapsed"),this.timeCollapse.textContent="expand_less")}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);class o extends i.default{constructor(e,t,s){super(e,t,s),this.emitter.on("time-clicked",e=>{this.model.updateTime(e)}),this.emitter.on("toggle-time-collapse",()=>{this.model.toggleCollapse("time")})}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(1);class o extends i.default{constructor(e,t){super(e,t)}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);class o extends i.default{constructor(e,t,s){super(e,t,s)}}t.default=o},function(e,t,s){}],[[2,1,2]]]);