(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,s){this.model=e,this.view=t,this.emitter=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.container=e,this.emitter=t}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(3),o=s(4),a=s(6);s(20);const l=new i;new a.default(new o.default(l),null,l)},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(5);class o extends i.default{constructor(e){super(e),this.scenarios=new Map([["2065BAP",!0],["2065CityII",!1]]),this.scenariosCollapsed=!1,this.purposes=new Map([["all",!0],["O",!1],["W",!1],["S",!1],["P",!1],["H",!1],["T",!1],["L",!1],["R",!1],["C",!1],["Q",!1]]),this.purposeColours=new Map([["all","#FFFFFF"],["O","#FF0000"],["W","#FFA500"],["S","#FFFF00"],["P","#ADFF2F"],["H","#008000"],["T","#20B2AA"],["L","#0000FF"],["R","#9932CC"],["C","#FF1493"],["Q","#8B4513"]]),this.purposesCollapsed=!1,this.overlays=new Map([["cma",!0],["city",!0],["nc",!1],["lrt",!0]]),this.overlayColours=new Map([["cma","#9932CC"],["city","#0000FF"],["nc","#FFFF00"],["lrt","#FF1493"]]),this.overlaysCollapsed=!1,this.times=new Map([["all",!0],["1",!1],["21",!1],["22",!1],["23",!1],["3",!1],["41",!1],["42",!1],["43",!1],["5",!1],["6",!1]]),this.timesCollapsed=!1,this.helpOpen=!1}initialDraw(){this.dispatchMapUpdated(),this.dispatchScenarioUpdated(),this.dispatchPurposeUpdated(),this.dispatchOverlayUpdated(),this.dispatchTimeUpdated(),this.emitter.emit("help-updated",this.helpOpen)}updateScenario(e){this.updateControlMap(this.scenarios,e),this.dispatchMapUpdated(),this.dispatchScenarioUpdated()}updatePurpose(e){this.updateControlMap(this.purposes,e),this.dispatchMapUpdated(),this.dispatchPurposeUpdated()}updateOverlay(e){this.updateControlMap(this.overlays,e),this.dispatchMapUpdated(),this.dispatchOverlayUpdated()}updateTime(e){this.updateControlMap(this.times,e),this.dispatchMapUpdated(),this.dispatchTimeUpdated()}updateControlMap(e,t){"all"===t?e.get("all")?e.set("all",!1):(e.forEach((t,s)=>{e.set(s,!1)}),e.set("all",!0)):(e.get("all")&&e.set("all",!1),e.set(t,!e.get(t)))}updatePurposeColours(e,t){this.purposeColours.set(e,t),this.dispatchMapUpdated(),this.dispatchPurposeUpdated()}updateOverlayColours(e,t){this.overlayColours.set(e,t),this.dispatchMapUpdated(),this.dispatchOverlayUpdated()}toggleHelp(){this.helpOpen=!this.helpOpen,this.emitter.emit("helpUpdated",this.helpOpen)}toggleCollapse(e){"scenario"===e?(this.scenariosCollapsed=!this.scenariosCollapsed,this.dispatchScenarioUpdated()):"purpose"===e?(this.purposesCollapsed=!this.purposesCollapsed,this.dispatchPurposeUpdated()):"overlay"===e?(this.overlaysCollapsed=!this.overlaysCollapsed,this.dispatchOverlayUpdated()):"time"===e&&(this.timesCollapsed=!this.timesCollapsed,this.dispatchTimeUpdated())}dispatchMapUpdated(){this.emitter.emit("map-updated",this.scenarios,this.purposes,this.overlays,this.times,this.purposeColours,this.overlayColours)}dispatchScenarioUpdated(){this.emitter.emit("scenario-updated",this.scenarios,this.scenariosCollapsed)}dispatchPurposeUpdated(){this.emitter.emit("purpose-updated",this.purposes,this.purposeColours,this.purposesCollapsed)}dispatchOverlayUpdated(){this.emitter.emit("overlay-updated",this.overlays,this.overlayColours,this.overlaysCollapsed)}dispatchTimeUpdated(){this.emitter.emit("time-updated",this.times,this.timesCollapsed)}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.emitter=e}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0),o=s(7),a=s(9),l=s(10),r=s(11),c=s(12),n=s(13),d=s(14),p=s(15),u=s(16),h=s(17),m=s(18),y=s(19);class f extends i.default{constructor(e,t,s){super(e,t,s),this.colourEditorView=new m.default(document.getElementById("colour-choices"),this.emitter),new y.default(this.model,this.colourEditorView,this.emitter),this.mapView=new o.default(document.getElementById("map"),this.emitter),new a.default(this.model,this.mapView,this.emitter),this.overlayView=new l.default(document.getElementById("overlay-control"),this.emitter),new r.default(this.model,this.overlayView,this.emitter),this.purposeView=new c.default(document.getElementById("purpose-control"),this.emitter),new n.default(this.model,this.purposeView,this.emitter),this.scenarioView=new d.default(document.getElementById("scenario-control"),this.emitter),new p.default(this.model,this.scenarioView,this.emitter),this.timeView=new u.default(document.getElementById("time-control"),this.emitter),new h.default(this.model,this.timeView,this.emitter),this.emitter.on("map-updated",(e,t,s,i,o,a)=>{this.mapView.draw(e,t,s,i,o,a)}),this.emitter.on("scenario-updated",(e,t)=>{this.scenarioView.draw(e,t)}),this.emitter.on("purpose-updated",(e,t,s)=>{this.purposeView.draw(e,t,s)}),this.emitter.on("overlay-updated",(e,t,s)=>{this.overlayView.draw(e,t,s)}),this.emitter.on("time-updated",(e,t)=>{this.timeView.draw(e,t)}),this.emitter.on("help-updated",e=>{o.default.drawHelp(e)})}}t.default=f},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(8),o=s(1);class a extends o.default{constructor(e,t){super(e,t),this.helpIcon=document.getElementById("help-icon"),this.help=document.getElementById("help"),this.closeHelp=document.getElementById("close-help"),this.initializeHelp(),i.accessToken="pk.eyJ1IjoidGhvbWFzbG9yaW5jeiIsImEiOiJjamx5aXVwaHAxamZzM3dsaWdkZ3Q2eGJyIn0.mXjlp9c3l2-NBoS1uaEUdw";this.map=new i.Map({container:"map",style:"mapbox://styles/thomaslorincz/cjx0png073khh1cpap7m6449e",bounds:[[-115.11466,53.04465],[-112.16116,54.06214]],attributionControl:!1,dragRotate:!1,pitchWithRotate:!1}).addControl(new i.AttributionControl({customAttribution:'<a href="https://github.com/thomaslorincz" rel="noopener" target="_blank">Developed by Thomas Lorincz<a/>'})),this.map.on("load",()=>{const e={type:"circle",paint:{"circle-radius":["interpolate",["linear"],["zoom"],9,["max",.1,["/",["to-number",["get","count"]],300]],12,["max",1,["*",2,["/",["to-number",["get","count"]],300]]]],"circle-opacity-transition":{duration:1e3,delay:0}}};this.map.addLayer(Object.assign({id:"2065BAP",source:{type:"vector",url:"mapbox://thomaslorincz.b38h0wik"},"source-layer":"output_2065BAP_300-2jb2ha"},e)),this.map.addLayer(Object.assign({id:"2065CityII",source:{type:"vector",url:"mapbox://thomaslorincz.4qfirexj"},"source-layer":"output_2065CityII_300-7gjcgt"},e));const t={type:"line",paint:{"line-width":2},"line-opacity-transition":{duration:500,delay:0}};this.map.addLayer(Object.assign({id:"cma",source:{type:"vector",url:"mapbox://thomaslorincz.1kz18y39"},"source-layer":"cma_boundary-5vtklc"},t)),this.map.addLayer(Object.assign({id:"city",source:{type:"vector",url:"mapbox://thomaslorincz.48okpw5t"},"source-layer":"city_boundary-d6ewoz"},t)),this.map.addLayer(Object.assign({id:"nc",source:{type:"vector",url:"mapbox://thomaslorincz.d571qaco"},"source-layer":"nc_CityII-axaip8"},t)),this.map.addLayer(Object.assign({id:"lrt",source:{type:"vector",url:"mapbox://thomaslorincz.75obfmea"},"source-layer":"lrt_2065-0kp6p1"},t)),this.emitter.emit("loaded")})}initializeHelp(){this.helpIcon.addEventListener("click",()=>{this.emitter.emit("help-clicked")}),this.help.addEventListener("click",e=>{e.target===document.getElementById("help")&&this.emitter.emit("help-clicked")}),this.closeHelp.addEventListener("click",()=>{this.emitter.emit("help-clicked")})}draw(e,t,s,i,o,a){e.forEach((e,s)=>{t.get("all")?this.map.setPaintProperty(s,"circle-color",o.get("all")):this.map.setPaintProperty(s,"circle-color",["match",["get","purp"],"O",o.get("O"),"W",o.get("W"),"S",o.get("S"),"P",o.get("P"),"H",o.get("H"),"T",o.get("T"),"L",o.get("L"),"R",o.get("R"),"C",o.get("C"),"Q",o.get("Q"),"#000000"]),this.map.setPaintProperty(s,"circle-opacity",e?1:0)}),s.forEach((e,t)=>{this.map.setPaintProperty(t,"line-color",a.get(t)),this.map.setPaintProperty(t,"line-opacity",e?1:0)}),e.forEach((e,s)=>{if(!e)return;const o=[];t.forEach((e,t)=>{e&&o.push(t)});const a=[];i.forEach((e,t)=>{e&&a.push(parseInt(t))}),i.get("all")&&t.get("all")?this.map.setFilter(s,null):i.get("all")?this.map.setFilter(s,["in","purp",...o]):t.has("all")?this.map.setFilter(s,["in","time",...a]):this.map.setFilter(s,["all",["in","time",...a],["in","purp",...o]])})}static drawHelp(e){document.getElementById("help").style.display=e?"flex":"none"}}t.default=a},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);class o extends i.default{constructor(e,t,s){super(e,t,s),this.emitter.on("loaded",()=>{this.model.initialDraw()}),this.emitter.on("help-clicked",()=>{this.model.toggleHelp()})}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(1);class o extends i.default{constructor(e,t){super(e,t),this.overlayEntries=document.querySelectorAll(".overlay-entry"),this.overlayCollapse=document.getElementById("overlay-collapse"),this.overlayEntries.forEach(e=>{e.addEventListener("click",e=>{e.target instanceof HTMLElement&&this.emitter.emit("overlay-clicked",e.target.dataset.value)})}),this.overlayCollapse.addEventListener("click",()=>{this.emitter.emit("toggle-overlay-collapse")})}draw(e,t,s){e.forEach((e,s)=>{const i=document.getElementById(`overlay-${s}`),o=i.querySelector(".control-entry-icon"),a=i.querySelector(".control-entry-checkbox");o instanceof HTMLElement&&(o.style.backgroundColor=t.get(s),e?(i.classList.add("active"),a.textContent="check_box"):(i.classList.remove("active"),a.textContent="check_box_outline_blank"))});const i=document.getElementById("overlay-content");s?(i.classList.add("collapsed"),this.overlayCollapse.textContent="expand_more"):(i.classList.remove("collapsed"),this.overlayCollapse.textContent="expand_less")}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);class o extends i.default{constructor(e,t,s){super(e,t,s),this.emitter.on("overlay-clicked",e=>{this.model.updateOverlay(e)}),this.emitter.on("toggle-overlay-collapse",()=>{this.model.toggleCollapse("overlay")})}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(1);class o extends i.default{constructor(e,t){super(e,t),this.purposeEntries=document.querySelectorAll(".purpose-entry"),this.purposeCollapse=document.getElementById("purpose-collapse"),this.purposeEntries.forEach(e=>{e.addEventListener("click",e=>{e.target instanceof HTMLElement&&this.emitter.emit("purpose-clicked",e.target.dataset.value)})}),this.purposeCollapse.addEventListener("click",()=>{this.emitter.emit("toggle-purpose-collapse")})}draw(e,t,s){e.forEach((e,s)=>{const i=document.getElementById(`purpose-${s}`),o=i.querySelector(".control-entry-checkbox"),a=i.querySelector(".control-entry-icon");a instanceof HTMLElement&&(a.style.backgroundColor=t.get(s),e?(i.classList.add("active"),o.textContent="check_box"):(i.classList.remove("active"),o.textContent="check_box_outline_blank"))});const i=document.getElementById("purpose-content");s?(i.classList.add("collapsed"),this.purposeCollapse.textContent="expand_more"):(i.classList.remove("collapsed"),this.purposeCollapse.textContent="expand_less")}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);class o extends i.default{constructor(e,t,s){super(e,t,s),this.emitter.on("purpose-clicked",e=>{this.model.updatePurpose(e)}),this.emitter.on("toggle-purpose-collapse",()=>{this.model.toggleCollapse("purpose")})}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(1);class o extends i.default{constructor(e,t){super(e,t),this.scenarioEntries=document.querySelectorAll(".scenario-entry"),this.scenarioCollapse=document.getElementById("scenario-collapse"),this.scenarioEntries.forEach(e=>{e.addEventListener("click",e=>{e.target instanceof HTMLElement&&this.emitter.emit("scenario-clicked",e.target.dataset.value)})}),this.scenarioCollapse.addEventListener("click",()=>{this.emitter.emit("toggle-scenario-collapse")})}draw(e,t){e.forEach((e,t)=>{const s=document.getElementById(`scenario-${t}`),i=s.querySelector(".control-entry-icon");e?(s.classList.add("active"),i.textContent="radio_button_checked"):(s.classList.remove("active"),i.textContent="radio_button_unchecked")});const s=document.getElementById("scenario-content");t?(s.classList.add("collapsed"),this.scenarioCollapse.textContent="expand_more"):(s.classList.remove("collapsed"),this.scenarioCollapse.textContent="expand_less")}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);class o extends i.default{constructor(e,t,s){super(e,t,s),this.emitter.on("scenario-clicked",e=>{this.model.updateScenario(e)}),this.emitter.on("toggle-scenario-collapse",()=>{this.model.toggleCollapse("scenario")})}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(1);class o extends i.default{constructor(e,t){super(e,t),this.timeEntries=document.querySelectorAll(".time-entry"),this.timeCollapse=document.getElementById("time-collapse"),this.timeEntries.forEach(e=>{e.addEventListener("click",e=>{e.target instanceof HTMLElement&&this.emitter.emit("time-clicked",e.target.dataset.value)})}),this.timeCollapse.addEventListener("click",()=>{this.emitter.emit("toggle-time-collapse")})}draw(e,t){e.forEach((e,t)=>{const s=document.getElementById(`time-${t}`),i=s.querySelector(".control-entry-checkbox");e?(s.classList.add("active"),i.textContent="check_box"):(s.classList.remove("active"),i.textContent="check_box_outline_blank")});const s=document.getElementById("time-content");t?(s.classList.add("collapsed"),this.timeCollapse.textContent="expand_more"):(s.classList.remove("collapsed"),this.timeCollapse.textContent="expand_less")}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);class o extends i.default{constructor(e,t,s){super(e,t,s),this.emitter.on("time-clicked",e=>{this.model.updateTime(e)}),this.emitter.on("toggle-time-collapse",()=>{this.model.toggleCollapse("time")})}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(1);class o extends i.default{constructor(e,t){super(e,t)}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);class o extends i.default{constructor(e,t,s){super(e,t,s)}}t.default=o},function(e,t,s){}],[[2,1,2]]]);